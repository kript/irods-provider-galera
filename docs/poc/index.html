<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.21" />
    <meta name="description" content="Proof of concept">


    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />

    <title>Proof of concept :: iRODS - MariaDB Galera cluster</title>
    <link href="/irods-provider-galera/css/nucleus.css" rel="stylesheet">
    <link href="/irods-provider-galera/css/font-awesome.min.css" rel="stylesheet">
    <link href="/irods-provider-galera/css/hybrid.css" rel="stylesheet">
    <link href="/irods-provider-galera/css/featherlight.min.css" rel="stylesheet">
    <link href="/irods-provider-galera/css/horsey.css" rel="stylesheet">
    <link href="/irods-provider-galera/css/theme.css" rel="stylesheet">
    <link rel="stylesheet" href="/irods-provider-galera/css/bootstrap.min.css">
    <script src="/irods-provider-galera/js/jquery-2.x.min.js"></script>
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left {
        display:none !important;
      }
    </style>

    
    <link href="/irods-provider-galera/css/theme-blue.css" rel="stylesheet">
    
    

    

  </head>
  <body class="" data-url="/irods-provider-galera/poc/">
    
<nav id="sidebar" class="showVisitedLinks">
  <div id="header-wrapper">
    <div id="header">
       
	<p><a href="https://mjstealey.github.io/irods-provider-galera/"><img src=https://mjstealey.github.io/irods-provider-galera//images/logo.png height="40"></a></p>
 


    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="Search...">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>
<script type="text/javascript" src="/irods-provider-galera/js/lunr.min.js"></script>
<script type="text/javascript" src="/irods-provider-galera/js/horsey.js"></script>
<script type="text/javascript">
    var baseurl = "https:\/\/mjstealey.github.io\/irods-provider-galera\/";
</script>
<script type="text/javascript" src="/irods-provider-galera/js/search.js"></script>

    
  </div>

  <div class="highlightable">
    <ul class="topics">
        
            <li data-nav-id="/irods-provider-galera/" class="dd-item">
            <a href="/irods-provider-galera/"><i class="fa fa-fw fa-home"></i></a>
            </li>
        

        
        
        
        
        
            
    
    
    
    
        <li data-nav-id="/irods-provider-galera/background/" class="dd-item 
         
        
        "
        >
            <a href="/irods-provider-galera/background/">
                <span>Background</span>
                
                <i style="color:grey" class="fa fa-check read-icon"></i>
            </a>
            
            
            
        </li>
    

        
            
    
    
    
    
        <li data-nav-id="/irods-provider-galera/usage/" class="dd-item 
         
        
        "
        >
            <a href="/irods-provider-galera/usage/">
                <span>Usage</span>
                
                    
                        <i class="fa fa-angle-right fa-lg category-icon"></i>
                    
                
                <i style="color:grey" class="fa fa-check read-icon"></i>
            </a>
            
            
            
                <ul>
                
                    
    
    
    
    
        <li data-nav-id="/irods-provider-galera/basic/" class="dd-item 
         
        
        "
        >
            <a href="/irods-provider-galera/basic/">
                <span>Basic usage</span>
                
                <i style="color:grey" class="fa fa-check read-icon"></i>
            </a>
            
            
            
        </li>
    

                
                    
    
    
    
    
        <li data-nav-id="/irods-provider-galera/advanced/" class="dd-item 
         
        
        "
        >
            <a href="/irods-provider-galera/advanced/">
                <span>Advanced usage</span>
                
                <i style="color:grey" class="fa fa-check read-icon"></i>
            </a>
            
            
            
        </li>
    

                
                </ul>
             
        </li>
    

        
            
    
    
    
    
        <li data-nav-id="/irods-provider-galera/poc/" class="dd-item 
        active 
        
        "
        >
            <a href="/irods-provider-galera/poc/">
                <span>Proof of concept</span>
                
                    
                        <i class="fa fa-angle-down fa-lg category-icon"></i>
                    
                
                <i style="color:grey" class="fa fa-check read-icon"></i>
            </a>
            
                
                
                
                    
                
            
            
            
                <ul>
                
                    
    
    
    
    
        <li data-nav-id="/irods-provider-galera/galera-vms/" class="dd-item 
         
        
        "
        >
            <a href="/irods-provider-galera/galera-vms/">
                <span>Galera cluster - VMs</span>
                
                <i style="color:grey" class="fa fa-check read-icon"></i>
            </a>
            
            
            
        </li>
    

                
                    
    
    
    
    
        <li data-nav-id="/irods-provider-galera/lan-local/" class="dd-item 
         
        
        "
        >
            <a href="/irods-provider-galera/lan-local/">
                <span>LAN - local machine</span>
                
                <i style="color:grey" class="fa fa-check read-icon"></i>
            </a>
            
            
            
        </li>
    

                
                    
    
    
    
    
        <li data-nav-id="/irods-provider-galera/lan-vm/" class="dd-item 
         
        
        "
        >
            <a href="/irods-provider-galera/lan-vm/">
                <span>LAN - virtual machines</span>
                
                <i style="color:grey" class="fa fa-check read-icon"></i>
            </a>
            
            
            
        </li>
    

                
                    
    
    
    
    
        <li data-nav-id="/irods-provider-galera/wan-vm/" class="dd-item 
         
        
        "
        >
            <a href="/irods-provider-galera/wan-vm/">
                <span>WAN - virtual machines</span>
                
                <i style="color:grey" class="fa fa-check read-icon"></i>
            </a>
            
            
            
        </li>
    

                
                    
    
    
    
    
        <li data-nav-id="/irods-provider-galera/code/" class="dd-item 
         
        
        "
        >
            <a href="/irods-provider-galera/code/">
                <span>Code / Console log</span>
                
                    
                        <i class="fa fa-angle-right fa-lg category-icon"></i>
                    
                
                <i style="color:grey" class="fa fa-check read-icon"></i>
            </a>
            
            
            
                <ul>
                
                    
    
    
    
    
        <li data-nav-id="/irods-provider-galera/init/" class="dd-item 
         
        
        "
        >
            <a href="/irods-provider-galera/init/">
                <span>default_init.log</span>
                
                <i style="color:grey" class="fa fa-check read-icon"></i>
            </a>
            
            
            
        </li>
    

                
                    
    
    
    
    
        <li data-nav-id="/irods-provider-galera/run-tests/" class="dd-item 
         
        
        "
        >
            <a href="/irods-provider-galera/run-tests/">
                <span>run_tests.py</span>
                
                <i style="color:grey" class="fa fa-check read-icon"></i>
            </a>
            
            
            
        </li>
    

                
                    
    
    
    
    
        <li data-nav-id="/irods-provider-galera/parallel-put-get/" class="dd-item 
         
        
        "
        >
            <a href="/irods-provider-galera/parallel-put-get/">
                <span>parallel_put_get.sh</span>
                
                <i style="color:grey" class="fa fa-check read-icon"></i>
            </a>
            
            
            
        </li>
    

                
                    
    
    
    
    
        <li data-nav-id="/irods-provider-galera/init-galera/" class="dd-item 
         
        
        "
        >
            <a href="/irods-provider-galera/init-galera/">
                <span>init_galera.log</span>
                
                <i style="color:grey" class="fa fa-check read-icon"></i>
            </a>
            
            
            
        </li>
    

                
                    
    
    
    
    
        <li data-nav-id="/irods-provider-galera/ils/" class="dd-item 
         
        
        "
        >
            <a href="/irods-provider-galera/ils/">
                <span>ils - parallel put get</span>
                
                <i style="color:grey" class="fa fa-check read-icon"></i>
            </a>
            
            
            
        </li>
    

                
                </ul>
             
        </li>
    

                
                </ul>
             
        </li>
    

        

        

        
        
        
        <section id="shortcuts">
            
                <li class="" role="">
                    <h3>More</h3>
                    <a href="https://github.com/mjstealey/irods-provider-galera/"><i class='fa fa-github'></i> Github repository</a>
                    
                </li>
            
                <li class="" role="">
                    
                    <a href="https://irods.org/documentation/"><i class='fa fa-bookmark'></i> iRODS Documentation</a>
                    
                </li>
            
                <li class="" role="">
                    
                    <a href="https://mariadb.com/kb/en/mariadb/documentation/"><i class='fa fa-bookmark'></i> MariaDB Documentation</a>
                    
                </li>
            
        </section>    
        
        
            <a class="" href="#" data-clear-history-toggle=""><i class="fa  fa-history"></i> Clear History</a>
        

        
    </ul>
    
     
    <section id="footer">
      <center>

<a class="github-button" href="https://github.com/mjstealey/irods-provider-galera/archive/master.zip" data-icon="octicon-cloud-download" aria-label="Download mjstealey/irods-provider-galera on GitHub">Download</a>


<a class="github-button" href="https://github.com/mjstealey/irods-provider-galera" data-icon="octicon-star" data-show-count="false" aria-label="Star mjstealey/irods-provider-galera on GitHub">Star</a>


<a class="github-button" href="https://github.com/mjstealey/irods-provider-galera/fork" data-icon="octicon-repo-forked" data-show-count="true" aria-label="Fork mjstealey/irods-provider-galera on GitHub">Fork</a>

</center>

<script async defer src="https://buttons.github.io/buttons.js"></script>
    </section>
  </div>
</nav>



        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
        
          <div id="top-bar">
            

            <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                <span id="sidebar-toggle-span">
                  <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                    <i class="fa fa-bars"></i>
                  </a>
                </span>
                <span id="toc-menu"><a href=""><i class="fa fa-list-alt"></i></a></span>
                <a href="https://mjstealey.github.io/irods-provider-galera/">
                  <span class="fa fa-arrow-circle-right" style="font-size:larger" aria-hidden="true"></span>
                  iRODS - MariaDB Galera cluster
                </a>
                
                   / <a href='/irods-provider-galera/poc/'>Proof of concept</a>
                
                
            </div>
            <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#testbed-deployment">Testbed Deployment</a></li>
<li><a href="#testing-methods">Testing methods</a>
<ul>
<li><a href="#lan">LAN</a></li>
<li><a href="#wan">WAN</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

          </div>
        
        
        <div id="body-inner">
          
            <h1>Proof of concept</h1>
          




<h2 id="testbed-deployment">Testbed Deployment</h2>

<p>Three CentOS 7.3.1611 (Core) virtual machines (VMs) were stood up to establish an iRODS provider Galera cluster testbed. Each VM is configured with a user account named <strong>galera</strong> which has rights to run Docker and not much else. <a href="https://mjstealey.github.io/irods-provider-galera//galera-vms">Complete testbed information</a></p>

<p><img src="https://mjstealey.github.io/irods-provider-galera//images/galeratestbed.png" alt="Galera testbed" /></p>

<h2 id="testing-methods">Testing methods</h2>

<p>A series of tests were applied to the nodes with differing requirements and complexity. Initially the nodes were tested in a known local environment for debugging purposes. From there, the standard iRODS test suite was applied to the whole testbed, one node at a time. Finally all nodes were subject to 30 parallel streams of iput and iget statements for 256 40 MB files concurrently while being configured to replicate varying degrees of latency using NetEm.</p>

<h3 id="lan">LAN</h3>

<ol>
<li><p><strong><a href="https://mjstealey.github.io/irods-provider-galera//lan-local">LAN - local machine</a></strong>:  The <a href="https://github.com/mjstealey/irods-provider-galera/blob/master/three-node-test.sh">three-node-test.sh</a> run on single node using docker network</p></li>

<li><p><strong><a href="https://mjstealey.github.io/irods-provider-galera//lan-vm">LAN - virtual machines</a></strong>: The <a href="https://github.com/irods/irods/blob/4-2-stable/scripts/run_tests.py">run_tests.py</a> script run on a single node at a time</p>

<p>Every installation of iRODS includes a python script that will run various tests located at <code>/var/lib/irods/scripts/run_tests.py</code></p>

<pre><code class="language-bash">$ python run_tests.py --help
Usage: run_tests.py [options]

Options:
  -h, --help            show this help message and exit
  --run_specific_test=dotted name
  --run_python_suite
  --include_auth_tests
  --run_devtesty
  --topology_test=&lt;icat|resource&gt;
  --catch_keyboard_interrupt
  --use_ssl
  --no_buffer
  --xml_output
  --federation=&lt;remote irods version, remote zone, remote host&gt;
</code></pre></li>
</ol>

<h3 id="wan">WAN</h3>

<ol>
<li><strong><a href="https://mjstealey.github.io/irods-provider-galera//wan-vm">WAN - virtual machines</a></strong>: The <a href="https://mjstealey.github.io/irods-provider-galera//parallel-put-get">parallel_put_get.sh</a> script run on every node concurrently using <strong>NetEm</strong> to vary latency per node</li>
</ol>


<footer class=" footline" >
	
	    <i class='fa fa-user'></i> <a href="mailto:michael.j.stealey@gmail.com">Michael J. Stealey</a>  <i class='fa fa-calendar'></i> 27/05/2017
	    </div>
	
</footer>



      </div>
    </div>

    
 
    

    <div id="navigation">
        
        
        
            
            
            
                
                    
                
                
                
            
        
        
            
            
            
                
                    
                
                
                
                    
            
            
                
                    
                
                
                
            
        
                
                    
            
            
                
                    
                
                
                
            
        
                
            
        
        
            
            
            
                
                    
                    
                
                
                
                    
            
            
                
                    
                        
                        
                    
                
                
                
            
        
                
                    
            
            
                
                    
                
                
                
            
        
                
                    
            
            
                
                    
                
                
                
            
        
                
                    
            
            
                
                    
                
                
                
            
        
                
                    
            
            
                
                    
                
                
                
                    
            
            
                
                    
                
                
                
            
        
                
                    
            
            
                
                    
                
                
                
            
        
                
                    
            
            
                
                    
                
                
                
            
        
                
                    
            
            
                
                    
                
                
                
            
        
                
                    
            
            
                
                    
                
                
                
            
        
                
            
        
                
            
        
          

        


        
            <a class="nav nav-prev" href="/irods-provider-galera/advanced/" title="Advanced usage"> <i class="fa fa-chevron-left"></i></a>
        
        
            <a class="nav nav-next" href="/irods-provider-galera/galera-vms/" title="Galera cluster - VMs" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
        
    </div>

    </section>
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/irods-provider-galera/js/clipboard.min.js"></script>
    <script src="/irods-provider-galera/js/jquery.sticky-kit.min.js"></script>
    <script src="/irods-provider-galera/js/featherlight.min.js"></script>
    <script src="/irods-provider-galera/js/html5shiv-printshiv.min.js"></script>
    <script src="/irods-provider-galera/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/irods-provider-galera/js/modernizr.custom.71422.js"></script>
    <script src="/irods-provider-galera/js/learn.js"></script>
    <script src="/irods-provider-galera/js/hugo-learn.js"></script>

    
    <link href="/irods-provider-galera/mermaid/mermaid.css" type="text/css" rel="stylesheet"/>
    <script src="/irods-provider-galera/mermaid/mermaid.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    

    

  </body>
</html>

